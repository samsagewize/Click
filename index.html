<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Cursor + Confetti Color Chaos</title>

<!-- Confetti library -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>
  body {
    margin: 0;
    height: 100vh;
    background: #000;
    overflow: hidden;
    cursor: none;
    font-family: Arial, Helvetica, sans-serif;
    touch-action: none;
  }

  .cursor {
    position: absolute;
    width: 42px;
    height: 42px;
    pointer-events: none;
    background: url('https://cur.cursors-4u.net/cursors/cur-9/cur817.cur') no-repeat center center;
    background-size: contain;
    transform: translate(-50%, -50%);
    z-index: 9999;
    will-change: transform;
    filter: drop-shadow(0 0 8px currentColor);
    transition: opacity 2.5s ease-out, color 0.6s ease;
  }

  .cursor.fade-out {
    opacity: 0;
  }

  h1 {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #0ff;
    font-size: clamp(2.8rem, 8vw, 6rem);
    text-shadow: 0 0 25px #0ff, 0 0 50px #f0f;
    pointer-events: none;
    user-select: none;
    text-align: center;
    line-height: 1.1;
    z-index: 10;
  }

  .count {
    position: fixed;
    top: 20px;
    right: 30px;
    color: #fff;
    font-size: 2.2rem;
    font-weight: bold;
    text-shadow: 0 0 15px #f0f, 0 0 35px #0ff;
    z-index: 10000;
    pointer-events: none;
  }
</style>
</head>
<body>

<div class="count" id="count">Cursors: 1</div>
<h1>click & watch the rainbow takeover</h1>

<script>
// Confetti + cursor colors palette (matching each other)
const COLOR_PALETTE = [
  '#ff3366',  // hot pink
  '#00ffff',  // cyan
  '#ffff00',  // bright yellow
  '#ff69b4',  // hot magenta
  '#00ff9d',  // neon mint
  '#9d00ff',  // electric purple
  '#fff200'   // acid yellow
];

let cursorCount = 1;
const countDisplay = document.getElementById('count');
const cursors = [];

// Initial "real" cursor with random color
const initialCursor = document.createElement('div');
initialCursor.className = 'cursor';
initialCursor.style.color = COLOR_PALETTE[Math.floor(Math.random() * COLOR_PALETTE.length)];
document.body.appendChild(initialCursor);

cursors.push({
  element: initialCursor,
  offsetX: 0,
  offsetY: 0
});

document.addEventListener('mousemove', (e) => {
  // Move real cursor
  cursors[0].element.style.left = e.clientX + 'px';
  cursors[0].element.style.top  = e.clientY + 'px';

  // Fake cursors follow with delay + wobble
  cursors.forEach((c, i) => {
    if (i === 0) return;
    
    const delay = 50 + i * 7;
    const wobble = Math.sin(Date.now() * 0.0025 + i) * 16;

    setTimeout(() => {
      c.element.style.left = (e.clientX + c.offsetX + wobble) + 'px';
      c.element.style.top  = (e.clientY + c.offsetY + wobble) + 'px';
    }, delay);
  });
});

// CLICK â†’ new cursor + confetti + matching colors!
document.addEventListener('click', (e) => {
  cursorCount++;
  countDisplay.textContent = `Cursors: ${cursorCount}`;

  // New cursor with RANDOM color from the palette
  const newCursor = document.createElement('div');
  newCursor.className = 'cursor';
  const randomColor = COLOR_PALETTE[Math.floor(Math.random() * COLOR_PALETTE.length)];
  newCursor.style.color = randomColor;
  
  const offsetX = (Math.random() - 0.5) * 110;
  const offsetY = (Math.random() - 0.5) * 110;
  
  newCursor.style.left = e.clientX + 'px';
  newCursor.style.top  = e.clientY + 'px';

  document.body.appendChild(newCursor);

  cursors.push({ element: newCursor, offsetX, offsetY });

  // Confetti explosion using THE SAME color palette
  confetti({
    particleCount: 90,
    spread: 110,
    startVelocity: 50,
    origin: { x: e.clientX / window.innerWidth, y: e.clientY / window.innerHeight },
    colors: COLOR_PALETTE,
    ticks: 600
  });

  confetti({
    particleCount: 50,
    angle: 65,
    spread: 90,
    origin: { x: (e.clientX - 120) / window.innerWidth, y: e.clientY / window.innerHeight },
    colors: COLOR_PALETTE
  });

  confetti({
    particleCount: 50,
    angle: 115,
    spread: 90,
    origin: { x: (e.clientX + 120) / window.innerWidth, y: e.clientY / window.innerHeight },
    colors: COLOR_PALETTE
  });
});

// Touch support for mobile
document.addEventListener('touchstart', (e) => {
  e.preventDefault();
  const touch = e.touches[0];
  const fakeEvent = { clientX: touch.clientX, clientY: touch.clientY };
  document.dispatchEvent(new MouseEvent('click', fakeEvent));
}, { passive: false });

// Optional mercy mode (uncomment to fade out oldest cursors after ~150)
// if (cursors.length > 150) {
//   const oldest = cursors.shift();
//   oldest.element.classList.add('fade-out');
//   setTimeout(() => oldest.element.remove(), 2800);
// }

</script>
</body>
</html>
