<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Cursor Apocalypse + Confetti Chaos</title>

<!-- Confetti library -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>
  body {
    margin: 0;
    height: 100vh;
    background: #000;
    overflow: hidden;
    cursor: none;           /* Hide real cursor */
    font-family: Arial, Helvetica, sans-serif;
    touch-action: none;     /* Better mobile experience */
  }

  .cursor {
    position: absolute;
    width: 38px;
    height: 38px;
    pointer-events: none;
    background: url('https://cur.cursors-4u.net/cursors/cur-9/cur817.cur') no-repeat center center;
    background-size: contain;
    transform: translate(-50%, -50%);
    z-index: 9999;
    will-change: transform;
    transition: opacity 2s ease-out;
  }

  .cursor.fade-out {
    opacity: 0;
  }

  h1 {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #0ff;
    font-size: clamp(2.5rem, 7vw, 5.5rem);
    text-shadow: 0 0 20px #0ff, 0 0 40px #f0f;
    pointer-events: none;
    user-select: none;
    text-align: center;
    line-height: 1.1;
    z-index: 10;
  }

  .count {
    position: fixed;
    top: 20px;
    right: 30px;
    color: #fff;
    font-size: 2rem;
    font-weight: bold;
    text-shadow: 0 0 15px #f0f, 0 0 30px #0ff;
    z-index: 10000;
    pointer-events: none;
  }
</style>
</head>
<body>

<div class="count" id="count">Cursors: 1</div>
<h1>click everywhere...<br>embrace the chaos</h1>

<script>
// Cursor tracking
let cursorCount = 1;
const countDisplay = document.getElementById('count');
const cursors = []; // {element, offsetX, offsetY}

document.addEventListener('mousemove', (e) => {
  // Move "real" cursor (first one)
  if (cursors.length > 0) {
    cursors[0].element.style.left = e.clientX + 'px';
    cursors[0].element.style.top  = e.clientY + 'px';
  }

  // Fake cursors follow with delay + wobble
  cursors.forEach((c, i) => {
    if (i === 0) return;
    
    const delay = 40 + i * 6;
    const wobble = Math.sin(Date.now() * 0.002 + i) * 14;

    setTimeout(() => {
      c.element.style.left = (e.clientX + c.offsetX + wobble) + 'px';
      c.element.style.top  = (e.clientY + c.offsetY + wobble) + 'px';
    }, delay);
  });
});

// ================== CLICK = CURSOR + CONFETTI ==================
document.addEventListener('click', (e) => {
  cursorCount++;
  countDisplay.textContent = `Cursors: ${cursorCount}`;

  // 1. Spawn new cursed cursor
  const newCursor = document.createElement('div');
  newCursor.className = 'cursor';
  
  const offsetX = (Math.random() - 0.5) * 100;
  const offsetY = (Math.random() - 0.5) * 100;
  
  newCursor.style.left = e.clientX + 'px';
  newCursor.style.top  = e.clientY + 'px';

  document.body.appendChild(newCursor);

  cursors.push({ element: newCursor, offsetX, offsetY });

  // 2. Confetti explosion!
  const colors = ['#ff0', '#f0f', '#0ff', '#ff69b4', '#00ff9d', '#fff200', '#ff3366'];

  // Big central burst
  confetti({
    particleCount: 80,
    spread: 100,
    startVelocity: 45,
    origin: { x: e.clientX / window.innerWidth, y: e.clientY / window.innerHeight },
    colors,
    ticks: 500
  });

  // Side sprays
  confetti({
    particleCount: 40,
    angle: 60,
    spread: 80,
    origin: { x: (e.clientX - 100) / window.innerWidth, y: e.clientY / window.innerHeight },
    colors
  });

  confetti({
    particleCount: 40,
    angle: 120,
    spread: 80,
    origin: { x: (e.clientX + 100) / window.innerWidth, y: e.clientY / window.innerHeight },
    colors
  });

  // Optional mercy (uncomment if you want oldest cursors to disappear after ~120)
  /*
  if (cursors.length > 120) {
    const oldest = cursors.shift();
    oldest.element.classList.add('fade-out');
    setTimeout(() => oldest.element.remove(), 2200);
  }
  */
});

// Mobile/touch support
document.addEventListener('touchstart', (e) => {
  e.preventDefault();
  const touch = e.touches[0];
  const fakeEvent = { clientX: touch.clientX, clientY: touch.clientY };
  document.dispatchEvent(new MouseEvent('click', fakeEvent));
}, { passive: false });

</script>
</body>
</html>
